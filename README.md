# WikiCodeGenerator
通过服务器wiki内容生成请求、模型、Dao等相关代码的代码生成器<br>
程序员的日常工作中有一些是重复性的，这些工作不难但繁琐的，给我们带来很多时间和精力上的消耗。<br>
有很多方法可以减少一些不必要重复，代码生成就是其中一个。这个WikiCodeGenerator就是一个通过wiki的内容生成代码的工具。<br>
能实现一个这样的工具的核心点在于：关于某个网络请求的请求url信息，请求参数信息、返回数据的信息已经完整的包含在wiki的内容中了，
写代码的时候，我们只是把这些信息“翻译”成具体的网络请求代码、Model和操作数据库的代码。这个过程完全可以自动化的完成。<br>
能生成这些代码的前提是关于网络请求代码、Model和操作数据库这部分的代码已经“规范化”，这样我们就可以按着同样的套路生成它。<br>
我们目前关于这部分的代码是基本上有了固定的套路，但还不是每个人都完全一样。我这个是按着请求、Model、Dao的方式生成的，至于以后具体生成什么样的更好，可以再讨论。<br>

具体例子，请参考代码<br>
1.参考代码中的1.html，这个是从“获取必达列表”的wiki上保存下来的。<br>
2.output是生成代码的目标文件夹<br>
从命令行进入bin目录,输入java -Djava.ext.dirs="lib" WikiCodeGenerator -f 1.html -d BiDa -r BiDaListRequest 回车<br>
就可以看到output目录中生成了BiDa.h BiDa.m BiDaDao.h BiDaDao.m BiDaListRequest.h BiDaListRequest.m这六个文件<br>
解释一下上面的命令行参数<br>
-f 输入文件名 -d 数据类名 -r 请求类名<br>
<br>
具体实现:<br>
1.首先分析网页，把我们需要的几个部分：如url、请求参数的字段和说明、返回数据的字段和说明等信息提取出来。<br>
2.根据这些信息生成代码<br>
分析网页使用的工具是jsoup，jsoup 是一款Java的HTML解析器，可直接解析某个URL地址、HTML文本内容。<br>
代码生成使用了StringTemplate，StringTemplate是一个模板引擎，可以方便的定义代码生成的模板<br>
具体的实现可以参考上面我写的代码。<br>

展望<br>
代码生成是一种强大的工具和思维方式，只要善于观察与发掘，相信在日常的很多场景中都可以使用得到。下面是我想到的可以深入挖掘的地方：<br>
1.界面代码:<br>
我们每个项目写界面的工作都占很大比例，我觉得至少有一半的时间都花在了写界面的上面。但写界面的流程和通过wiki信息手工写代码的方式有点类似：UI人员把界面颜色、间距等标注好，我们ios、安卓在各照着实现一遍，这里面的核心也是一样，我们手工写界面所需要的信息（静态信息），UI标注图已经完全包含了，我们只是把这个信息再描述一遍。总共描述了三遍。如果通过某种方式只要描述一遍，剩余的ios、安卓（或H5)代码能生成出来就好了。这个如果能实现或部分实现都将大大减少重复的工作量。<br>
2.ios版和安卓版:<br>
ios和安卓使用的语言和类库不一样。但都是实现同样的功能，业务流程都是一样，能否通过某种方式使其中某些逻辑只在一个平台上描述一遍，另一个平台上就可以重复使用？<br>
我目前知道进行这方面尝试的有：<br>
1.google在用j2Objc，谷歌的Java/Objective-C代码转换工具。（允许开发者将Java代码转换成适用于iOS平台的Objective-C代码。这意味着，开发者编写的Java代码可以成为iOS应用程序的一部分，且无需对生成的文件进行编辑。）<br>
2.mocl. 通过lisp写和界面无关的代码，从而实现在不同的平台上可以复用代码<br>

最后：这个WikiCodeGenerator目前只是实现了生成ios objc的代码。也可以很方便的写出生成安卓（或后台java）代码的生成器。
